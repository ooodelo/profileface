# CorruGreat — Face→Профлист (синус)

> **Подготовка курсора:** создайте файл `CorruGreat/ui/transparent_cursor.png` — 32×32 px, 32‑битный RGBA, полностью прозрачный, с точкой привязки (hotspot) в левом верхнем углу. Поместите его в указанную папку, чтобы инструмент мог скрыть нативный курсор и отрисовывать собственный маркер.

Инструмент для SketchUp 2020+, превращающий плоские грани в синусоидальный «профлист» в один клик. Плагин реализует рабочий процесс из спецификации: интерактивный выбор грани, предпросмотр параметров и построение волнистой сетки без использования API, появившихся после SketchUp 2020.

## Возможности

- Выбор грани при помощи `PickHelper` с подсветкой (полупрозрачная заливка и красный контур).
- Настройка профиля в диалоге (`HtmlDialog`): направление волн, высота (A), шаг (P), количество сегментов (N).
- «Предпросмотр» — обновляет подсветку волнистых линий без коммита геометрии.
- Горячие клавиши:
  - `Shift` — переключение направления (вдоль/поперёк).
  - `Esc` — сброс выбора и закрытие диалога.
  - `Enter` — повторное применение последних параметров.
- Генерация сетки через `Geom::PolygonMesh` и добавление в модель через `entities.add_faces_from_mesh`.
- Геометрия обрезается границей исходной грани при помощи `entities.intersect_with` (совместимо с SU 2020).
- Параметры сохраняются в атрибутах группы, можно быстро повторять последние значения.

## Установка

1. Скопируйте папку проекта в каталог плагинов SketchUp (например `C:/Users/<имя>/AppData/Roaming/SketchUp/SketchUp 2020/SketchUp/Plugins`).
2. Перезапустите SketchUp и активируйте расширение `CorruGreat` в разделе `Extensions`.

## Использование

1. В меню `Extensions → CorruGreat → CorruGreat — Face→Профлист (синус)` запустите инструмент.
2. Наведите курсор на грань: она подсветится.
3. Кликните ЛКМ — откроется диалог параметров. Настройте значения и нажмите «Предпросмотр» или «Применить».
4. После применения исходная грань заменяется группой с волнистой поверхностью. Параметры можно повторно применить, нажав `Enter`.

## Совместимость

- SketchUp 2020 и выше (используются только API, доступные в 2020 году).
- Не требует Overlays API или `EntitiesBuilder`.

## Структура кода

- `corru_great.rb` — регистрация расширения.
- `CorruGreat/loader.rb` — загрузка модулей.
- `CorruGreat/commands.rb` — команда меню и запуск инструмента.
- `CorruGreat/tool/face_picker.rb` — основная логика инструмента.
- `CorruGreat/ui/dialog.*` — `HtmlDialog` и интерфейс настроек.
- `CorruGreat/geom/*` — вспомогательные классы для базиса и генерации сетки.
- `CorruGreat/ops/*` — применение и обрезка геометрии.

## Лицензия

Свободное использование в рамках проекта.
